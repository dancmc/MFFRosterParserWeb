{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.js","webpack:///webpack/bootstrap e49835c0b7f392cf25b6","webpack:///./src/Compress.js","webpack:///./src/core/base64.js","webpack:///./src/core/converter.js","webpack:///./src/core/file.js","webpack:///./src/core/image.js","webpack:///./src/core/photo.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","apply","undefined","_base","_converter","_file","_image","_photo","_interopRequireDefault","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_base2","_converter2","_file2","_image2","_photo2","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Compress","value","el","options","_this","Promise","resolve","reject","input","document","querySelector","setAttribute","addEventListener","evt","output","compress","concat","files","compressFile","file","photo","start","performance","now","alt","name","ext","type","startSize","size","load","then","compressImage","src","img","startWidth","naturalWidth","startHeight","naturalHeight","resize","_Image$resize","maxWidth","maxHeight","width","height","endWidth","endHeight","imageToCanvas","canvas","iterations","base64prefix","prefix","loopCompression","quality","minQuality","base64","finalSize","data","end","difference","elapsedTimeInSeconds","initialSizeInMb","MB","endSizeInMb","endWidthInPx","endHeightInPx","initialWidthInPx","initialHeightInPx","sizeReducedInPercent","arguments","targetSize","targetQuality","base64str","canvasToBase64","newSize","all","map","mime","base64ToFile","len","replace","split","match","byteString","window","atob","content","charCodeAt","Blob","Uint8Array","createElement","image","context","getContext","drawImage","toDataURL","KB","fileReader","FileReader","result","err","readAsDataURL","Image","targetWidth","targetHeight","outputWidth","Math","min","outputHeight","scaleWidth","h","scaleHeight","w","Photo","_ref","_ref$quality","_ref$size","_ref$maxWidth","_ref$maxHeight","_ref$resize","endSize"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Compress\"] = factory();\n\telse\n\t\troot[\"Compress\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Compress\"] = factory();\n\telse\n\t\troot[\"Compress\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module, __webpack_require__(1), __webpack_require__(2), __webpack_require__(3), __webpack_require__(4), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(module, require('./core/base64.js'), require('./core/converter.js'), require('./core/file.js'), require('./core/image.js'), require('./core/photo.js'));\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod, global.base64, global.converter, global.file, global.image, global.photo);\n\t    global.Compress = mod.exports;\n\t  }\n\t})(this, function (module, _base, _converter, _file, _image, _photo) {\n\t  'use strict';\n\t\n\t  var _base2 = _interopRequireDefault(_base);\n\t\n\t  var _converter2 = _interopRequireDefault(_converter);\n\t\n\t  var _file2 = _interopRequireDefault(_file);\n\t\n\t  var _image2 = _interopRequireDefault(_image);\n\t\n\t  var _photo2 = _interopRequireDefault(_photo);\n\t\n\t  function _interopRequireDefault(obj) {\n\t    return obj && obj.__esModule ? obj : {\n\t      default: obj\n\t    };\n\t  }\n\t\n\t  function _toConsumableArray(arr) {\n\t    if (Array.isArray(arr)) {\n\t      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n\t        arr2[i] = arr[i];\n\t      }\n\t\n\t      return arr2;\n\t    } else {\n\t      return Array.from(arr);\n\t    }\n\t  }\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var _createClass = function () {\n\t    function defineProperties(target, props) {\n\t      for (var i = 0; i < props.length; i++) {\n\t        var descriptor = props[i];\n\t        descriptor.enumerable = descriptor.enumerable || false;\n\t        descriptor.configurable = true;\n\t        if (\"value\" in descriptor) descriptor.writable = true;\n\t        Object.defineProperty(target, descriptor.key, descriptor);\n\t      }\n\t    }\n\t\n\t    return function (Constructor, protoProps, staticProps) {\n\t      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t      if (staticProps) defineProperties(Constructor, staticProps);\n\t      return Constructor;\n\t    };\n\t  }();\n\t\n\t  var Compress = function () {\n\t    function Compress() {\n\t      _classCallCheck(this, Compress);\n\t    }\n\t\n\t    _createClass(Compress, [{\n\t      key: 'attach',\n\t      value: function attach(el, options) {\n\t        var _this = this;\n\t\n\t        return new Promise(function (resolve, reject) {\n\t          var input = document.querySelector(el);\n\t          input.setAttribute('accept', 'image/*');\n\t          input.addEventListener('change', function (evt) {\n\t            var output = _this.compress([].concat(_toConsumableArray(evt.target.files)), options);\n\t            resolve(output);\n\t          }, false);\n\t        });\n\t      }\n\t    }, {\n\t      key: 'compress',\n\t      value: function compress(files, options) {\n\t        function compressFile(file, options) {\n\t          var photo = new _photo2.default(options);\n\t          photo.start = performance.now();\n\t          photo.alt = file.name;\n\t          photo.ext = file.type;\n\t          photo.startSize = file.size;\n\t\n\t          return _file2.default.load(file).then(compressImage(photo));\n\t        }\n\t        function compressImage(photo) {\n\t          return function (src) {\n\t            return _image2.default.load(src).then(function (img) {\n\t              photo.startWidth = img.naturalWidth;\n\t              photo.startHeight = img.naturalHeight;\n\t\n\t              if (photo.resize) {\n\t                var _Image$resize = _image2.default.resize(photo.maxWidth, photo.maxHeight)(img.naturalWidth, img.naturalHeight),\n\t                    width = _Image$resize.width,\n\t                    height = _Image$resize.height;\n\t\n\t                photo.endWidth = width;\n\t                photo.endHeight = height;\n\t              } else {\n\t                photo.endWidth = img.naturalWidth;\n\t                photo.endHeight = img.naturalHeight;\n\t              }\n\t              return _converter2.default.imageToCanvas(photo.endWidth, photo.endHeight)(img);\n\t            }).then(function (canvas) {\n\t              photo.iterations = 1;\n\t\n\t              photo.base64prefix = _base2.default.prefix(photo.ext);\n\t              return loopCompression(canvas, photo.startSize, photo.quality, photo.size, photo.minQuality, photo.iterations);\n\t            }).then(function (base64) {\n\t              photo.finalSize = _base2.default.size(base64);\n\t              return _base2.default.data(base64);\n\t            }).then(function (data) {\n\t              photo.end = performance.now();\n\t              var difference = photo.end - photo.start;\n\t\n\t              return {\n\t                data: data,\n\t                prefix: photo.base64prefix,\n\t                elapsedTimeInSeconds: difference / 1000,\n\t                alt: photo.alt,\n\t                initialSizeInMb: _converter2.default.size(photo.startSize).MB,\n\t                endSizeInMb: _converter2.default.size(photo.finalSize).MB,\n\t                ext: photo.ext,\n\t                quality: photo.quality,\n\t                endWidthInPx: photo.endWidth,\n\t                endHeightInPx: photo.endHeight,\n\t                initialWidthInPx: photo.startWidth,\n\t                initialHeightInPx: photo.startHeight,\n\t                sizeReducedInPercent: (photo.startSize - photo.finalSize) / photo.startSize * 100,\n\t                iterations: photo.iterations\n\t              };\n\t            });\n\t          };\n\t        }\n\t        function loopCompression(canvas, size) {\n\t          var quality = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\t          var targetSize = arguments[3];\n\t          var targetQuality = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\t          var iterations = arguments[5];\n\t\n\t          var base64str = _converter2.default.canvasToBase64(canvas, quality);\n\t          var newSize = _base2.default.size(base64str);\n\t\n\t          iterations += 1;\n\t\n\t          if (newSize > targetSize) {\n\t            return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations);\n\t          }\n\t\n\t          if (quality > targetQuality) {\n\t            return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations);\n\t          }\n\t\n\t          if (quality < 0.5) {\n\t            return base64str;\n\t          }\n\t          return base64str;\n\t        }\n\t        return Promise.all(files.map(function (file) {\n\t          return compressFile(file, options);\n\t        }));\n\t      }\n\t    }], [{\n\t      key: 'convertBase64ToFile',\n\t      value: function convertBase64ToFile(base64, mime) {\n\t        return _converter2.default.base64ToFile(base64, mime);\n\t      }\n\t    }]);\n\t\n\t    return Compress;\n\t  }();\n\t\n\t  module.exports = Compress;\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.base64 = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t  var size = function size(base64) {\n\t    var len = base64.replace(/^data:image\\/\\w+;base64,/, '').length;\n\t    return (len - 814) / 1.37;\n\t  };\n\t\n\t  var mime = function mime(base64) {\n\t    return base64.split(';')[0].match(/jpeg|png|gif/)[0];\n\t  };\n\t\n\t  var data = function data(base64) {\n\t    return base64.replace(/^data:image\\/\\w+;base64,/, '');\n\t  };\n\t\n\t  var prefix = function prefix(ext) {\n\t    return 'data:' + ext + ';base64,';\n\t  };\n\t\n\t  exports.default = { size: size, mime: mime, data: data, prefix: prefix };\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.converter = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var base64ToFile = function base64ToFile(base64) {\n\t    var mime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'image/jpeg';\n\t\n\t    var byteString = window.atob(base64);\n\t    var content = [];\n\t    for (var i = 0; i < byteString.length; i++) {\n\t      content[i] = byteString.charCodeAt(i);\n\t    }\n\t    return new window.Blob([new Uint8Array(content)], { type: mime });\n\t  };\n\t\n\t  var imageToCanvas = function imageToCanvas(width, height) {\n\t    var canvas = document.createElement('canvas');\n\t    canvas.width = width;\n\t    canvas.height = height;\n\t    return function (image) {\n\t      var context = canvas.getContext('2d');\n\t      context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\t      return canvas;\n\t    };\n\t  };\n\t\n\t  var canvasToBase64 = function canvasToBase64(canvas) {\n\t    var quality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.75;\n\t\n\t    var base64 = canvas.toDataURL('image/jpeg', quality);\n\t    return base64;\n\t  };\n\t\n\t  var size = function size(_size) {\n\t    return {\n\t      KB: _size / 1000,\n\t      MB: _size / (1000 * 1000)\n\t    };\n\t  };\n\t\n\t  exports.default = { base64ToFile: base64ToFile, imageToCanvas: imageToCanvas, canvasToBase64: canvasToBase64, size: size };\n\t});\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.file = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var load = function load(file) {\n\t    return new Promise(function (resolve, reject) {\n\t      var fileReader = new FileReader();\n\t      fileReader.addEventListener('load', function (evt) {\n\t        resolve(evt.target.result);\n\t      }, false);\n\t\n\t      fileReader.addEventListener('error', function (err) {\n\t        reject(err);\n\t      }, false);\n\t\n\t      fileReader.readAsDataURL(file);\n\t    });\n\t  };\n\t\n\t  exports.default = { load: load };\n\t});\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.image = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  'use strict';\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  var load = function load(src) {\n\t    return new Promise(function (resolve, reject) {\n\t      var img = new Image();\n\t      img.addEventListener('load', function () {\n\t        resolve(img);\n\t      }, false);\n\t\n\t      img.addEventListener('error', function (err) {\n\t        reject(err);\n\t      }, false);\n\t\n\t      img.src = src;\n\t    });\n\t  };\n\t\n\t  var resize = function resize(targetWidth, targetHeight) {\n\t    return function (width, height) {\n\t      var aspectRatio = width / height;\n\t\n\t      if (!targetWidth && !targetHeight) return { width: width, height: height };\n\t\n\t      var outputWidth = Math.min(width, targetWidth);\n\t      var outputHeight = Math.min(height, targetHeight);\n\t\n\t      if (outputWidth) {\n\t\n\t        var scaleWidth = width / outputWidth;\n\t        var h = height / scaleWidth;\n\t\n\t        return { width: outputWidth, height: h };\n\t      } else {\n\t\n\t        var scaleHeight = height / outputHeight;\n\t        var w = width / scaleHeight;\n\t\n\t        return { width: w, height: outputHeight };\n\t      }\n\t    };\n\t  };\n\t\n\t  exports.default = { load: load, resize: resize };\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else if (typeof exports !== \"undefined\") {\n\t    factory(exports);\n\t  } else {\n\t    var mod = {\n\t      exports: {}\n\t    };\n\t    factory(mod.exports);\n\t    global.photo = mod.exports;\n\t  }\n\t})(this, function (exports) {\n\t  \"use strict\";\n\t\n\t  Object.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t  });\n\t\n\t  function _classCallCheck(instance, Constructor) {\n\t    if (!(instance instanceof Constructor)) {\n\t      throw new TypeError(\"Cannot call a class as a function\");\n\t    }\n\t  }\n\t\n\t  var Photo = function Photo(_ref) {\n\t    var _ref$quality = _ref.quality,\n\t        quality = _ref$quality === undefined ? 0.75 : _ref$quality,\n\t        _ref$size = _ref.size,\n\t        size = _ref$size === undefined ? 2 : _ref$size,\n\t        _ref$maxWidth = _ref.maxWidth,\n\t        maxWidth = _ref$maxWidth === undefined ? 1920 : _ref$maxWidth,\n\t        _ref$maxHeight = _ref.maxHeight,\n\t        maxHeight = _ref$maxHeight === undefined ? 1920 : _ref$maxHeight,\n\t        _ref$resize = _ref.resize,\n\t        resize = _ref$resize === undefined ? true : _ref$resize;\n\t\n\t    _classCallCheck(this, Photo);\n\t\n\t    this.start = performance.now();\n\t    this.end = null;\n\t\n\t    this.alt = null;\n\t    this.ext = null;\n\t    this.startSize = null;\n\t    this.startWidth = null;\n\t    this.startHeight = null;\n\t\n\t    this.size = size * 1000 * 1000;\n\t    this.endSize = null;\n\t    this.endWidth = null;\n\t    this.endHeight = null;\n\t    this.iterations = 0;\n\t    this.base64prefix = null;\n\t\n\t    this.quality = quality;\n\t    this.resize = resize;\n\t    this.maxWidth = maxWidth;\n\t    this.maxHeight = maxHeight;\n\t  };\n\t\n\t  exports.default = Photo;\n\t});\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e49835c0b7f392cf25b6","import Base64 from './core/base64.js'\nimport Converter from './core/converter.js'\nimport File from './core/file.js'\nimport Image from './core/image.js'\nimport Photo from './core/photo.js'\n\nclass Compress {\n  attach (el, options) {\n    return new Promise((resolve, reject) => {\n      const input = document.querySelector(el)\n      input.setAttribute('accept', 'image/*')\n      input.addEventListener('change', (evt) => {\n        const output = this.compress([...evt.target.files], options)\n        resolve(output)\n      }, false)\n    })\n  }\n\n  compress (files, options) {\n    function compressFile (file, options) {\n      // Create a new photo object\n      const photo = new Photo(options)\n      photo.start = performance.now()\n      photo.alt = file.name\n      photo.ext = file.type\n      photo.startSize = file.size\n\n      return File.load(file).then(compressImage(photo))\n    }\n    function compressImage (photo) {\n      return (src) => {\n        return Image.load(src).then((img) => {\n          // Store the initial dimensions\n          photo.startWidth = img.naturalWidth\n          photo.startHeight = img.naturalHeight\n          // Resize the image\n          if (photo.resize) {\n            const { width, height } = Image.resize(photo.maxWidth, photo.maxHeight)(img.naturalWidth, img.naturalHeight)\n            photo.endWidth = width\n            photo.endHeight = height\n          } else {\n            photo.endWidth = img.naturalWidth\n            photo.endHeight = img.naturalHeight\n          }\n          return Converter.imageToCanvas(photo.endWidth, photo.endHeight)(img)\n        })\n        .then((canvas) => {\n          photo.iterations = 1\n          // Base64.mime(Converter.canvasToBase64(canvas))\n          photo.base64prefix = Base64.prefix(photo.ext)\n          return loopCompression(canvas, photo.startSize, photo.quality, photo.size, photo.minQuality, photo.iterations)\n        })\n        .then((base64) => {\n          photo.finalSize = Base64.size(base64)\n          return Base64.data(base64)\n        })\n        .then((data) => {\n          photo.end = performance.now()\n          const difference = photo.end - photo.start // in ms\n\n          return {\n            data: data,\n            prefix: photo.base64prefix,\n            elapsedTimeInSeconds: difference / 1000, // in seconds\n            alt: photo.alt,\n            initialSizeInMb: Converter.size(photo.startSize).MB,\n            endSizeInMb: Converter.size(photo.finalSize).MB,\n            ext: photo.ext,\n            quality: photo.quality,\n            endWidthInPx: photo.endWidth,\n            endHeightInPx: photo.endHeight,\n            initialWidthInPx: photo.startWidth,\n            initialHeightInPx: photo.startHeight,\n            sizeReducedInPercent: (photo.startSize - photo.finalSize) / photo.startSize * 100,\n            iterations: photo.iterations\n          }\n        })\n      }\n    }\n    function loopCompression (canvas, size, quality = 1, targetSize, targetQuality = 1, iterations) {\n      const base64str = Converter.canvasToBase64(canvas, quality)\n      const newSize = Base64.size(base64str)\n      // const base64str = convertCanvasToBase64(src)\n      // const size = getFileSize(base64str);\n      iterations += 1\n      // add in iteration count\n      if (newSize > targetSize) {\n        return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations)\n      }\n\n      if (quality > targetQuality) {\n        return loopCompression(canvas, newSize, quality - 0.1, targetSize, targetQuality, iterations)\n      }\n\n      if (quality < 0.5) {\n        return base64str\n      }\n      return base64str\n    }\n    return Promise.all(files.map((file) => {\n      return compressFile(file, options)\n    }))\n  }\n  static convertBase64ToFile (base64, mime) {\n    return Converter.base64ToFile(base64, mime)\n  }\n}\n// Supported input formats\n// image/png, image/jpeg, image/jpg, image/gif, image/bmp, image/tiff, image/x-icon,  image/svg+xml, image/webp, image/xxx\n// image/png, image/jpeg, image/webp\nmodule.exports = Compress\n\n\n\n// WEBPACK FOOTER //\n// ./src/Compress.js","const size = (base64) => {\n  const len = base64.replace(/^data:image\\/\\w+;base64,/, '').length\n  return (len - 814) / 1.37\n  // return len * 3 / 4\n}\n\n  // strip off the data: url prefix to get just the base64-encoded bytes\n  //var data = img.replace(/^data:image\\/\\w+;base64,/, \"\");\nconst mime = (base64) => {\n  return base64.split(';')[0].match(/jpeg|png|gif/)[0]\n}\n\n\nconst data = (base64) => {\n  return base64.replace(/^data:image\\/\\w+;base64,/, '')\n}\n\nconst prefix = (ext) => {\n  return `data:${ext};base64,`\n}\n\nexport default { size, mime, data, prefix }\n\n\n// WEBPACK FOOTER //\n// ./src/core/base64.js","\nconst base64ToFile = (base64, mime = 'image/jpeg') => {\n  const byteString = window.atob(base64)\n  const content = []\n  for (let i = 0; i < byteString.length; i++) {\n    content[i] = byteString.charCodeAt(i)\n  }\n  return new window.Blob([new Uint8Array(content)], {type: mime})\n}\n\nconst imageToCanvas = (width, height) => {\n  const canvas = document.createElement('canvas')\n  canvas.width = width\n  canvas.height = height\n  return (image) => {\n    const context = canvas.getContext('2d')\n    context.drawImage(image, 0, 0, canvas.width, canvas.height)\n    return canvas\n  }\n}\n\nconst canvasToBase64 = (canvas, quality = 0.75) => {\n  // in order to compress the final image format has to be jpeg\n  const base64 = canvas.toDataURL('image/jpeg', quality)\n  return base64\n}\n\n// const canvasToImage = (canvas, quality=.75, mimeType='image/jpeg') => {\n//   const image = new Image()\n//   const base64str = canvas.toDataURL(mimeType, quality)\n//   image.src = base64str\n//   return image\n// }\n\nconst size = (size) => {\n  return {\n    KB: size / 1000,\n    MB: size / (1000 * 1000)\n  }\n}\n\nexport default { base64ToFile, imageToCanvas, canvasToBase64, size }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/converter.js","\nconst load = (file) => {\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader()\n    fileReader.addEventListener('load', (evt) =>  {\n      resolve(evt.target.result)\n    }, false)\n\n    fileReader.addEventListener('error', (err) => {\n      reject(err)\n    }, false)\n\n    fileReader.readAsDataURL(file)\n  })\n}\n\n\nexport default  { load }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/file.js","\nconst load = (src) => {\n  return new Promise((resolve, reject) => {\n    const img = new Image()\n    img.addEventListener('load', () => {\n      resolve(img)\n    }, false)\n\n    img.addEventListener('error', (err) => {\n      reject(err)\n    }, false)\n\n    img.src = src\n  })\n}\n  /*\n   * Resize the image based on the given height or width boundary.\n   * Auto resize based on aspect ratio. \n  **/\nconst resize = (targetWidth, targetHeight) => {\n  return (width, height) => {\n    const aspectRatio = width / height\n\n    if (!targetWidth && !targetHeight) return { width, height }\n\n    const outputWidth = Math.min(width, targetWidth)\n    const outputHeight = Math.min(height, targetHeight)\n\n    if (outputWidth) {\n      \n      const scaleWidth = width / outputWidth\n      const h = height / scaleWidth\n\n      return { width: outputWidth, height: h }\n    } else {\n\n      const scaleHeight = height / outputHeight\n      const w = width / scaleHeight\n\n      return { width: w, height: outputHeight }\n    }\n  }\n}\n\n\nexport default { load, resize }\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/image.js","// The photo model\nclass Photo {\n  constructor ({ quality=0.75, size=2, maxWidth=1920, maxHeight=1920, resize=true }) {\n    this.start = performance.now()\n    this.end = null\n\n    this.alt = null\n    this.ext = null\n    this.startSize = null\n    this.startWidth = null\n    this.startHeight = null\n    // How much will the quality decrease by each compression\n    // this.stepQuality = stepQuality\n\n    // size in MB\n    this.size = size * 1000 * 1000\n    this.endSize = null\n    this.endWidth = null\n    this.endHeight = null\n    this.iterations = 0\n    this.base64prefix = null\n    // Carry out image resizing\n    this.quality = quality\n    this.resize = resize\n    this.maxWidth = maxWidth\n    this.maxHeight = maxHeight\n  }\n}\nexport default Photo\n\n\n// WEBPACK FOOTER //\n// ./src/core/photo.js"],"sourceRoot":""}